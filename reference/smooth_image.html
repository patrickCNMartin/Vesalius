<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Smooth Image — smooth_image • vesalius</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Smooth Image — smooth_image"><meta property="og:description" content="Apply iterative smoothing to Vesalius images"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">vesalius</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/vesalius.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Vesalius_Analysis/Spatial_DNA_seq.html">Vesalius: Spatial Genomics</a>
    </li>
    <li>
      <a href="../articles/Vesalius_Analysis/Spatial_RNA_seq.html">Vesalius: Spatial Transcriptomics</a>
    </li>
    <li>
      <a href="../articles/Vesalius_Analysis/Vesalius_MSB_analysis.html">Vesalius: MSB Manuscript Analysis</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/patrickCNMartin/Vesalius/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Smooth Image</h1>
    <small class="dont-index">Source: <a href="https://github.com/patrickCNMartin/Vesalius/blob/main/R/image_processing.R" class="external-link"><code>R/image_processing.R</code></a></small>
    <div class="hidden name"><code>smooth_image.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Apply iterative smoothing to Vesalius images</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">smooth_image</span><span class="op">(</span></span>
<span>  <span class="va">vesalius_assay</span>,</span>
<span>  dimensions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  embedding <span class="op">=</span> <span class="st">"last"</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"iso"</span>,</span>
<span>  iter <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  sigma <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  box <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  neuman <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  gaussian <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  na.rm <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  across_levels <span class="op">=</span> <span class="st">"min"</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>vesalius_assay</dt>
<dd><p>a vesalius_assay object</p></dd>


<dt>dimensions</dt>
<dd><p>numeric vector of latent space dimensions to use.</p></dd>


<dt>embedding</dt>
<dd><p>character string describing which embedding should
be used.</p></dd>


<dt>method</dt>
<dd><p>character describing smoothing method to use "median" ,
"iso"  or "box" or a combination of them.</p></dd>


<dt>iter</dt>
<dd><p>numeric - number of smoothing iteration</p></dd>


<dt>sigma</dt>
<dd><p>numeric - standard deviation associated with isoblur (Gaussian)</p></dd>


<dt>box</dt>
<dd><p>numeric describing box size (centered around center pixel)
for smoothing</p></dd>


<dt>threshold</dt>
<dd><p>numeric - discard pixels that are too low in value (cutoff
threshold only applied in box/median blurs).</p></dd>


<dt>neuman</dt>
<dd><p>logical describing If Neumann boundary conditions should be
used, Dirichlet otherwise (default true, Neumann)</p></dd>


<dt>gaussian</dt>
<dd><p>logical - use gaussian filter</p></dd>


<dt>na.rm</dt>
<dd><p>logical describing if NA values should be removed</p></dd>


<dt>across_levels</dt>
<dd><p>character - method used to account for multiple
smoothing levels (see details). Select from: "min","mean", "max"</p></dd>


<dt>verbose</dt>
<dd><p>logical - progress message output.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>a vesalius_assay</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The smooth_image function provides a series of options to smooth
your grey scale images contained within the vesalius_assay object.</p>
<p>You can select any number of dimensions to be smoothed. As default, we take
the first 3 dimensions.</p>
<p>Vesalius provides 3 smoothing methods:
 * median: computes median color in box (box size defined by box)
 * box: computes max color value in box (box size defined by box)
 * iso: compute gaussian kernel using sigma (Gussian SD defined by sigma)</p>
<p>Vesalius can apply the same smoothing paramters over multiple iterations
as defined by the iter argument.
It is also possible to provide multiple values to box and sigma as numeric
vectors. Vesalius will run the smoothing over all provided values and return
either the maximum, minimum or mean color value as described by the
across_levels argument.</p>
<p>Please note that unless specified the smoothing always applied to
the active embedding (default is last embedding computed). If you
want to start over you can simply set <code>embedding</code> to which ever
embedding you want to work with.</p>
<p>This will take the raw embedding values before any image processing
has been applied. No need to re-run the embedding if you are not
satisfied with the smoothing.</p>
<p>For more information, we suggest reading through the imager vignette.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">vesalius</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># First we build a simple object</span></span></span>
<span class="r-in"><span><span class="va">ves</span> <span class="op">&lt;-</span> <span class="fu">build_vesalius_object</span><span class="op">(</span><span class="va">coordinates</span>, <span class="va">counts</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># We can do a simple run</span></span></span>
<span class="r-in"><span><span class="va">ves</span> <span class="op">&lt;-</span> <span class="fu">build_vesalius_embeddings</span><span class="op">(</span><span class="va">ves</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># simple smoothing</span></span></span>
<span class="r-in"><span><span class="va">ves</span> <span class="op">&lt;-</span> <span class="fu">smooth_image</span><span class="op">(</span><span class="va">ves</span>, embedding <span class="op">=</span> <span class="st">"PCA"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># multiple rounds</span></span></span>
<span class="r-in"><span><span class="va">ves</span> <span class="op">&lt;-</span> <span class="fu">smooth_image</span><span class="op">(</span><span class="va">ves</span>, iter <span class="op">=</span> <span class="fl">3</span>, embedding <span class="op">=</span> <span class="st">"PCA"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># accross level</span></span></span>
<span class="r-in"><span><span class="va">ves</span> <span class="op">&lt;-</span> <span class="fu">smooth_image</span><span class="op">(</span><span class="va">ves</span>, box <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">11</span><span class="op">)</span>,</span></span>
<span class="r-in"><span> accross_level <span class="op">=</span> <span class="st">"mean"</span>,</span></span>
<span class="r-in"><span> embedding <span class="op">=</span> <span class="st">"PCA"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Patrick C.N. Martin.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

